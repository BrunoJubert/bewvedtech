document.addEventListener("DOMContentLoaded", function () {
  let e = document.querySelector(".dropdown");
  if (e) {
    let t = e.querySelector(".dropdown-btn");
    if (t) {
      t.addEventListener("click", function (t) {
        t.stopPropagation(), e.classList.toggle("open");
      }),
        document.addEventListener("click", function () {
          e.classList.remove("open");
        });
      let n = e.querySelector(".dropdown-content");
      if (n) {
        n.addEventListener("click", function (e) {
          e.stopPropagation();
        });
        let i = n.querySelectorAll("a");
        i.forEach((t) => {
          t.addEventListener("click", function () {
            e.classList.remove("open");
          });
        });
      }
    }
  }
  document.querySelectorAll('a[href^="#"]').forEach((e) => {
    e.addEventListener("click", function (e) {
      let t = document.querySelector(this.getAttribute("href"));
      t && (e.preventDefault(), t.scrollIntoView({ behavior: "smooth" }));
    });
  });
  let r = document.querySelectorAll(".pack");
  if ("IntersectionObserver" in window) {
    let s = new IntersectionObserver(
      (e) => {
        e.forEach((e) => {
          e.isIntersecting && e.target.classList.add("visible");
        });
      },
      { threshold: 0.1 }
    );
    r.forEach((e) => s.observe(e));
  }
  let o = document.getElementById("year");
  o && (o.textContent = new Date().getFullYear()),
    document.querySelectorAll(".toggle-details").forEach((e) => {
      e.addEventListener("click", () => {
        let t = e.nextElementSibling;
        if (!t) return;
        let n = t.classList.toggle("hidden");
        t.classList.contains("transitioning") ||
          (t.classList.add("transitioning"),
          (t.style.maxHeight = n ? "0px" : t.scrollHeight + "px"),
          setTimeout(() => {
            n && (t.style.maxHeight = null),
              t.classList.remove("transitioning");
          }, 300)),
          (e.textContent = n ? "Voir +" : "Voir -");
      });
    });
  let l = [
      "Cr\xe9ons votre site sur-mesure",
      "Sites modernes et adapt\xe9s",
      "Optimis\xe9s pour votre activit\xe9",
      "Votre exp\xe9rience d\xe9marre ici",
    ],
    a = document.querySelector(".animated-text");
  if (a) {
    let c = 0;
    (a.textContent = l[0]),
      a.classList.add("active"),
      setInterval(function e() {
        a.classList.remove("active"),
          setTimeout(() => {
            (a.textContent = l[c]),
              a.offsetWidth,
              a.classList.add("active"),
              (c = (c + 1) % l.length);
          }, 500);
      }, 3e3);
  }
  window.addEventListener("scroll", () => {
    let e = document.querySelector(".hero-bg");
    if (e) {
      let t = window.scrollY;
      e.style.transform = `scale(${1 + 8e-5 * t}) translateY(${0.2 * t}px)`;
    }
  });
  let d = document.getElementById("myForm");
  d &&
    d.addEventListener("submit", function (e) {
      e.preventDefault();
      var t = this,
        n = document.getElementById("submitBtn");
      n &&
        ((n.disabled = !0),
        (n.innerHTML = '<i class="fas fa-paper-plane"></i> Envoi en cours...'),
        (n.style.backgroundColor = ""),
        fetch(t.action, {
          method: "POST",
          body: new FormData(t),
          headers: { Accept: "application/json" },
        })
          .then((e) => {
            if (e.ok)
              (n.innerHTML = '<i class="fas fa-check"></i> Envoy\xe9'),
                (n.style.backgroundColor = "#4CAF50"),
                t.reset(),
                setTimeout(function () {
                  (n.innerHTML = '<i class="fas fa-paper-plane"></i> Envoyer'),
                    (n.style.backgroundColor = ""),
                    (n.disabled = !1);
                }, 2e3);
            else throw Error("Erreur lors de lâ€™envoi");
          })
          .catch((e) => {
            (n.innerHTML = '<i class="fas fa-paper-plane"></i> Envoyer'),
              (n.disabled = !1);
          }));
    });
});
